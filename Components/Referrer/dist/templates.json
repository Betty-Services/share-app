[{"name":"StoreOrRedirectPage","type":"CONTENT_COMPONENT","allowedTypes":[],"orientation":"HORIZONTAL","jsx":"(() => {\n  const LOCAL_STORAGE_KEY = 'referer';\n  const {\n    defaultRedirectPage,\n    operation,\n    storage\n  } = options;\n  const isDev = B.env === 'dev';\n  const storagelocation = storage === 'sessionStorage' ? window.sessionStorage : window.localStorage;\n\n  const doLoadReferer = () => {\n    const referer = storagelocation.getItem(LOCAL_STORAGE_KEY);\n\n    if (referer) {\n      storagelocation.removeItem(LOCAL_STORAGE_KEY);\n    }\n\n    return referer;\n  };\n\n  const doStoreReferer = () => {\n    storagelocation.setItem(LOCAL_STORAGE_KEY, window.location.pathname);\n  };\n\n  const history = isDev ? null : useHistory();\n  useEffect(() => {\n    if (operation === 'redirect') {\n      const referer = doLoadReferer();\n\n      if (referer) {\n        history && history.push(referer);\n      } else {\n        const {\n          id\n        } = defaultRedirectPage;\n\n        if (id) {\n          const endpointParams = {\n            id\n          };\n          const redirectTo = B.useEndpoint(endpointParams);\n\n          if (redirectTo === location.pathname) {\n            history && history.go(0);\n          } else {\n            history && history.push(redirectTo);\n          }\n        }\n      }\n    } else {\n      doStoreReferer();\n    }\n  }, [operation]);\n  useEffect(() => {\n    B.defineFunction('RedirectToStoredPage', args => {\n      let redirectTo;\n\n      if (defaultRedirectPage) {\n        const {\n          id,\n          params\n        } = defaultRedirectPage;\n        const newParams = Object.entries(params).reduce((acc, cv) => {\n          const key = cv[0];\n          const value = cv[1];\n          acc[key] = [args.actionb5[value]];\n          return acc;\n        }, {});\n        const endpointParams = {\n          id,\n          params: newParams\n        };\n        redirectTo = B.useEndpoint(endpointParams);\n      }\n\n      if (redirectTo === location.pathname) {\n        history && history.go(0);\n      } else {\n        history && history.push(redirectTo);\n      }\n    });\n  }, []);\n\n  if (isDev) {\n    return <div className={classes.root}>REDIRECT/STORE PAGE</div>;\n  }\n\n  return <div />;\n})()","styles":"() => () => ({\n  root: {}\n})","functions":["RedirectToStoredPage"],"triggers":[],"interactions":{},"componentHash":"dca8535636063ad16c9b1ea5b915c1c2b7be4442745cee8673b9eb076c72ab9b"}]
